/*!
    TagWire 1.0.3 - coxcore.com

    This library helps you on the data binds between Javascript object and HTML tags.

    @package  cox.TagWire
    @author   Park U-yeong (ascript0@gmail.com)
    @since    2012.09
    @update   2015.07.13
    @license  MIT
*/
!function(cox){"use strict";cox.ready=cox.ready||function(fnc){var eventType,listener;if("function"==typeof fnc)return eventType="readystatechange","complete"===document.readyState?void fnc():void(document.addEventListener?(listener=function(){document.removeEventListener(eventType,listener,!1),fnc()},document.addEventListener(eventType,listener,!1)):document.attachEvent&&(eventType="on"+eventType,listener=function(){document.detachEvent(eventType,listener),fnc()},document.attachEvent(eventType,listener)))}}(window.cox||(window.cox={})),define(["cox"],function(cox){function CoxTagWire(){function afterShow(t){t&&(setCls(t,A.hidn,!1),each(findEl(t,A.hidn),_afterShow))}function rendering(t,v,c,d){var a=[];d.opt.evfns=[],d.ready&&d.ready({target:t,data:v,name:c,type:EV.ready}),render(t,v,c,a,d),each(a,function(ro){try{ro.f(ro.t,ro.v,ro.c)}catch(e){errorTail(e.message,ro.s)}}),each(d.opt.evfns,function(ro){applyEvent(ro.t,ro.v,ro.c,d,EV.finish)}),d.finish&&d.finish({target:t,data:v,name:c,type:EV.finish}),d.asyncNum||setTimeout(function(){each(d.evcmp,function(ro){applyEvent(ro.t,ro.v,ro.c,d,EV.complete)}),d.complete&&d.complete(d.event)},1)}function asyncRendering(t,v,c,d){d.asyncNum++,setTimeout(function(){d.opt={async:!0},d.asyncNum--,rendering(t,v,c,d)},1)}function render(t,o,c,ct,dt){var f,iso,acls,isAsc;dt.skipReg&&dt.skipReg.test(c)||(o instanceof Array?(f=parseArr,iso=!0):null!==o&&"object"==typeof o?(f=parseObj,iso=!0):(f=applyValue,iso=!1),acls=c+T+TA.asc,isAsc=dt.opt.async,dt.opt.async=null,each(t,function(el){hasCls(el,A.blk)||(iso&&!isAsc&&hasCls(el,acls)?asyncRendering(el,o,c,dt):f(el,o,c,ct,dt))}))}function parseArr(t,a,c,ct,dt){var cl,l,f,fe;return hasCls(t,c)?(cl=c+T+TA.list,l=a.length,f=function(ta){applyEvent(ta,a,c,dt,EV.ready)!==!1&&(applyValue(ta,l,c,ct,dt),hasCls(ta,cl)&&fe(ta),each(findEl(ta,cl),fe),hasCls(ta,A.arr)&&setArr(ta,a,c,ct,dt)),applyFinish(ta,a,c,dt)},fe=function(el){setList(el,a,c,ct,dt)},void each(t,f)):void each(findEl(t,c),function(tc){render(tc,a,c,ct,dt)})}function setArr(t,a,c,ct,dt){var i,len=a.length;for(i=0;len>i;i++)applyValue(t,a[i],c+T+i,ct,dt)}function setList(t,a,c,ct,dt){var sc=childEl(t,V.sct);sc.length&&setItem(t,sc,a,c,ct,dt),applyValue(t,a,A.lida,ct,dt,!0)}function setItem(t,sc,a,c,ct,dt){var way,tn,otl,v,gi,len=a.length-1,rev=hasCls(t,A.rev),ist=hasCls(t,A.td),isb=hasCls(t,A.bu),typ=ist?A.td:isb?A.bu:null,pe=isb?sc[sc.length-1]:lastEl(t,A.itm),lfn=function(tmp){var idx,tv,tag,vn=tmp._tw_varsName;void 0===otl&&(otl=tmp._tw_tlen),tv=v?"boolean"==typeof tmp._tw_itemType?Boolean(v[vn]):v[vn]:null,(isEmpty(vn)||!v.hasOwnProperty(vn)||tmp._tw_itemType===tv)&&(tag=cloneNode(tmp._tw_template),idx=tn+gi*way+1,applyValue(tag,gi,A.idn,ct,dt),applyValue(tag,idx,A.idx,ct,dt),applyValue(tag,otl+idx,A.tidx,ct,dt),applyEvent(tag,v,c,dt,EV.ready)!==!1&&(render(tag,v,A.itm,ct,dt),applyValue(tag,v,A.itda,ct,dt,!0),tag._remove||(t.insertBefore(tag,pe),tmp._tw_tlen++)),applyFinish(tag,v,c,dt))};for(c=c+T+TA.itm,pe||(pe=sc[sc.length-1]),pe=pe.nextSibling,isb?(way=-1,tn=len):(way=1,tn=0),each(childEl(t,A.nw),_nitmCls),gi=0;len>=gi;gi++)v=a[rev?len-gi:gi],each(sc,lfn);typ||each(findEl(t,A.od),function(el){t.removeChild(el)}),t.className.replace(RE.fix,function(o,n){var itm=childEl(t,A.itm),ln=itm.length;return n=Number(n),ln>n&&each(itm,function(el,i){isb?i>=n&&t.removeChild(el):ln-n>i&&t.removeChild(el)}),o})}function parseObj(t,o,c,ct,dt){var vo,te,s,itm=c===A.itm;if(c===G&&(t=document.body),itm||applyEvent(t,o,c,dt,EV.ready)!==!1)for(s in o)o.hasOwnProperty(s)&&s!==G&&(vo=o[s],"object"===typeOf(vo)?(te=t,(hasCls(te,s)||(te=findEl(t,s)).length)&&render(te,vo,s,ct,dt)):render(t,vo,s,ct,dt));itm||applyFinish(t,o,c,dt),hasCls(t,A.obda,!0)&&applyValue(t,o,A.obda,ct,dt,!0),vo=o.global,vo&&(applyEvent(document.body,vo,G,dt,EV.ready)!==!1&&render(document.body,vo,G,ct,dt),applyFinish(document.body,vo,G,dt))}function applyValue(t,v,c,ct,dt,slf){var te=t,f=function(s,fs){return RE.hyp.test(fs)||isSG?fcall(te,v,c,fs,ct,dt):(T+fs).replace(RE.tail,ff),s},ff=function(fss){return fcall(te,v,c,fss.substr(1),ct,dt),""};hasCls(t,c+T,!0)&&t.className.replace(reValue(c),f),slf||each(findEl(t,c+T,!0),function(el){te=el,te.className.replace(reValue(c),f)})}function reValue(c){var v=rx[V.resf+c];return v||(rxl++,v=new RegExp("(?:^|\\s)"+H+c+T+"(?!"+V.skip+"|"+EV.all+")(\\S+)","g"),rx[V.resf+c]=v),v}function applyEvent(t,v,c,dt,ev,slf){var bln=null,te=t,f=function(s,fs){return bln!==!1&&(RE.hyp.test(fs)||isSG?bln=fcall(te,v,c,fs,null,dt):(T+fs).replace(RE.tail,ff)),s},ff=function(fss){return fcall(te,v,c,fss.substr(1),null,dt)===!1&&(bln=!1),""};return c=c+T+ev,hasCls(t,c+T,!0)&&t.className.replace(reEvent(c),f),slf||each(findEl(t,c+T,!0),function(el){te=el,te.className.replace(reEvent(c),f)}),bln}function reEvent(c){var v=rx[V.ree+c];return v||(rxl++,v=new RegExp("(?:^|\\s)"+H+c+T+"(?!"+V.skip+")(\\S+)","g"),rx[V.ree+c]=v),v}function applyFinish(t,v,c,dt){dt.opt.evfns.push({t:t,v:v,c:c}),dt.evcmp.push({t:t,v:v,c:c})}function fcall(t,v,c,s,ct,dt){var f=fn[s],tf=tail[s];if(f)try{return tf?tf(t,v,c):f(t,v,c,dt)}catch(e){errorTail(e.message,s)}else if(tf)if(ct)ct.push({t:t,v:v,c:c,s:s,f:tf});else try{return tf(t,v,c)}catch(e){errorTail(e.message,s)}else setAttr(t,v,s)}function initTmp(t){t||(t=document.body),each(findEl(t,A.cpt),initCapture),each(findEl(t,A.tmp),initTemplate)}function initTemplate(t){var tcls,scr=document.createElement("script"),cls=t.className;setCls(t,A.tmp,!1),setCls(t,A.od,!1),setCls(t,A.itm,!0),setCls(t,A.nw,!0),scr.setAttribute("type",V.sct),cls&&(tcls=RE.ityp.exec(cls),tcls&&(scr._tw_itemType=t.getAttribute("data-"+TA.ityp),"true"===scr._tw_itemType?scr._tw_itemType=!0:"false"===scr._tw_itemType&&(scr._tw_itemType=!1),scr._tw_varsName=tcls[0].replace(T+TA.ityp,"").substr(1))),scr._tw_tlen=0,scr._tw_template=t,t._tw_targetScr=scr,t.parentNode.replaceChild(scr,t)}function initCapture(t){var scr,tc;setCls(t,A.cln,!0),setCls(t,A.cpt,!1),tc=cloneNode(t),tc.style.display="",scr=t.previousSibling,scr&&scr.type===V.scc||(scr=document.createElement("script"),scr.setAttribute("type",V.scc),t.parentNode.insertBefore(scr,t)),scr._tw_template=tc}function cloneNode(t){var tag,scr,tc=t.cloneNode(!0),tca=tc.getElementsByTagName("script");return each(t.getElementsByTagName("script"),function(sc,i){tag=sc._tw_template,tag&&(scr=tca[i],scr._tw_template=tag,void 0!==sc._tw_itemType&&(scr._tw_itemType=sc._tw_itemType),void 0!==sc._tw_varsName&&(scr._tw_varsName=sc._tw_varsName),void 0!==sc._tw_tlen&&(scr._tw_tlen=0))}),tc}function setAttr(t,v,s){if(!isEmpty(v)){var fs=s.replace(RE.rbl,""),rb=s!==fs;"boolean"==typeof t[fs]?t[fs]=rb?!getBln(v):getBln(v):(void 0!==t[fs]||null!==t.getAttribute(fs)||RE.hyp.test(fs))&&t.setAttribute(fs,v)}}function each(a,f){var i,l;if(a&&f){if(void 0===a.length||a.getAttribute)return f(a);for(i=0,l=a.length;l>i;i++)if(f(a[i],i)===!1)return!1}}function oeach(o,f){var s;if(o&&f)for(s in o)if(o.hasOwnProperty(s)&&f(o[s],s)===!1)return!1}function typeOf(o){return null===o?"null":o instanceof Array?"array":typeof o}function getBln(v){switch(typeOf(v)){case"array":return Boolean(v.length);case"object":return Boolean(v);default:return!RE.fls.test(v)}}function isEmpty(v){return null===v||void 0===v}function clog(){var console=window.console;console&&console.log&&("function"==typeof console.log.apply?console.log.apply(console,arguments):console.log(arrJoin(arguments)))}function cerror(){var console=window.console;console&&"function"==typeof console.error?console.error.apply(console,arguments):clog(arrJoin(arguments))}function errorTail(m,s){throw cerror("[TagWire.tail."+s+"]  "+m+"."),new Error("TagWire rendering was aborted because of [TagWire.tail."+s+"] error.")}function arrJoin(a,p){var s="";return p=p||" ",each(a,function(v){s+=(s?p:"")+v}),s}var findAll,hasClass,setClass,hasCls,setCls,findEl,childEl,lastEl,attrList,checkEl,_nitmCls,_addTails,_rmvTails,_afterShow,G="global",H="_",T="-",A={tmp:"template",rev:"reverse",td:"topdown",bu:"bottomup",tidx:"tidx",idx:"idx",idn:"i",fix:"fix",arr:"array",itm:"item",nw:"new",od:"old",rndr:"render",blk:"block",cpt:"capture",cln:"clone",hidn:"hidden",obda:"objdata",itda:"itemdata",lida:"listdata"},TA={list:"list",ityp:"itemtype",asc:"async",itm:"item"},V={sct:"text/tw-template",scc:"text/tw-capture",catp:"data|aria",skip:"\\d+(?="+T+")",cls:"c_",resf:"s_",rep:"r_",ree:"e_",hid:"_tw_"},EV={all:"",ready:"ready",finish:"finish",complete:"complete"},RE={fe:/^\s+/,ityp:new RegExp("\\S*"+T+TA.ityp),hyp:new RegExp("^(?:"+V.catp+")-\\S+"),fls:/^\s*(?:false|0|null|undefined|)\s*$/,rbl:/^_/,tail:new RegExp(T+"+[^\\"+T+"]+","g"),fix:new RegExp(H+A.fix+"(\\d+)"),amp:/&amp;/g,lt:/&lt;/g,gt:/&gt;/g},_this=this,fn={},tail={},rx={},rxl=0,check=document.createElement("span"),isTC=""===check.textContent,isSG="-"!==T;oeach(EV,function(v){EV.all+=(EV.all?"|":"")+v}),oeach(TA,function(v){V.skip+=(V.skip?"|":"")+v}),RE.ev=new RegExp(H+"([^\\"+T+"]+)"+T+"(?:"+EV.all+")"),function(){var fsn;check.classList?(hasClass=function(t,c,b){return b?-1!==t.className.indexOf(c):t.classList&&t.classList.contains(c)},setClass=function(t,c,b){b?t.classList.add(c):t.classList.remove(c)}):(hasClass=function(t,c,b){var reg;return b?-1!==t.className.indexOf(c):(reg=rx[c],reg||(rxl++,reg=new RegExp("(?:^|\\s)"+c+"(?:\\s|$)"),rx[c]=reg),reg.test(t.className))},setClass=function(t,c,b){var reg,cn=t.className;b?hasCls(t,c)||(t.className=cn?cn+" "+c:c):(reg=rx[c],reg||(rxl++,reg=new RegExp("(?:^|\\s+)"+c+"(?=\\s|$)"),rx[c]=reg),t.className=cn.replace(reg,"").replace(RE.fe,""))}),hasCls=function(t,c,b){return hasClass(t,H+c,b)},setCls=function(t,c,b){setClass(t,H+c,b)},document.querySelectorAll?(findAll=function(t,c){return t.querySelectorAll("."+c)},findEl=function(t,s,b){var sel;return sel=s.indexOf("text/")?b?"[class*="+H+s+"]":"."+H+s:'script[type="'+s+'"]',t.querySelectorAll(sel)},fsn=0,childEl=function(t,s,b){var sel,tar,eid=!t.id;return eid&&(fsn=fsn?++fsn:1,t.id=V.hid+fsn),sel=s.indexOf("text/")?b?"#"+t.id+">[class*="+H+s+"]":"#"+t.id+">."+H+s:"#"+t.id+'>script[type="'+s+'"]',tar=t.querySelectorAll(sel),eid&&(t.id="",fsn--),tar},lastEl=function(t,s,b){var a=childEl(t,s,b),l=a.length;return l?a[l-1]:null},attrList=function(t){return t.attributes}):(findAll=function(t,c){var a=[],ta=t.getElementsByTagName("*");return each(ta,function(el){hasClass(el,c)&&a.push(el)}),a},findEl=function(t,s,b){var f,a=[],bs=!s.indexOf("text/"),ta=t.getElementsByTagName(bs?"script":"*");return f=bs?function(el){el.type===s&&a.push(el)}:function(el){hasCls(el,s,b)&&a.push(el)},each(ta,f),a},childEl=function(t,s,b){var f,a=[];return f=s.indexOf("text/")?function(el){hasCls(el,s,b)&&a.push(el)}:function(el){el.type===s&&a.push(el)},each(t.children,f),a},lastEl=function(t,s,b){var a=t.children,l=a.length;if(l){var i,el;for(i=l-1;i>=0;i--)if(el=a[i],hasCls(el,s,b))return el}return null},RE.attl=/(?: )([^\s]+?)=(?:([\'\"]).*?\2|[^ ]+)/g,attrList=function(t){var b=[],s=t.cloneNode().outerHTML;return s.replace(RE.attl,function(o,s){var ab=t.getAttributeNode(s);return"object"!=typeof ab&&b.push(ab),o}),b}),checkEl="object"==typeof HTMLElement?function(t){return t instanceof HTMLElement}:function(t){return!!t.nodeName}}(),_nitmCls=function(el){setCls(el,A.nw,!1),setCls(el,A.od,!0)},_addTails=function(f,s){return tail[s]=f,f},_rmvTails=function(f,s){return delete tail[s],f},_afterShow=function(el){setCls(el,A.hidn,!1)},this.tail=tail,this.render=function(t,o,c){var otp,vo,asc,op,os,oo;if(initTmp(),rxl>500&&(rxl=0,rx={}),otp="object"===typeOf(o),t&&0!==t.length&&(c||o&&otp)){switch(asc=!1,op={opt:{},evcmp:[]},typeOf(c)){case"boolean":asc=c,c=A.rndr;break;case"undefined":c=A.rndr;break;case"object":asc=Boolean(c.async),otp&&c.select&&(oo=o,o={},each(c.select.split(" "),function(s){os=oo[s],void 0!==os&&(o[s]=os)})),c.skip&&(op.skipReg=new RegExp(c.skip.replace(/ +/g,"|"))),op.complete=c.complete,op.ready=c.ready,op.finish=c.finish,c=c.varsName||A.rndr}return c===G&&(t=document.body),otp&&c===A.rndr?vo=o:(vo={},vo[c]=o),op.asyncNum=0,op.event={target:t,data:vo,name:c,type:EV.complete},asc?asyncRendering(t,vo,A.rndr,op):rendering(t,vo,A.rndr,op),afterShow(t),o}},this.callTail=function(fs,t,v,c){each(t,function(el){fcall(el,v,c,fs)})},this.setTail=function(s,f){fn[s]=f},this.addTails=function(o){oeach(o,_addTails)},this.removeTails=function(o){oeach(o,_rmvTails)},this.initTemplate=function(t){each(t,initTmp)},this.cloneNode=function(t){var tc=null;return each(t,function(el){return tc=cloneNode(el),!1}),tc},this.checkBoolean=getBln,this.each=each,this.oeach=oeach,this.typeOf=typeOf,this.isEmpty=isEmpty,this.log=clog,this.error=cerror,function(){var css=["  /* CSS for TagWire */  ","."+H+A.tmp+",","."+H+A.cpt+",","."+H+A.hidn,"{display:none;}  "].join(""),head=document.head||document.getElementsByTagName("head")[0],style=document.createElement("style");style.setAttribute("type","text/css"),style.styleSheet?style.styleSheet.cssText=css:style.appendChild(document.createTextNode(css)),head.appendChild(style),cox.ready(function(){initTmp(document)})}(),fn.attr=function(t,v,c){var s,r,pv;"string"!=typeof c||isEmpty(v)||(s="#"+c+"#",r=rx[V.rep+c],r||(rxl++,r=new RegExp(s,"g"),rx[V.rep+c]=r),each(attrList(t),function(p){p=p.name,pv=t.getAttribute(p),"string"==typeof pv&&-1!==pv.indexOf(s)&&t.setAttribute(p,pv.replace(r,v))}))},fn.insert=function(t,v,c){var s,r,tv,sv;"string"!=typeof c||isEmpty(v)||(s="#"+c+"#",r=rx[V.rep+c],r||(rxl++,r=new RegExp(s,"g"),rx[V.rep+c]=r),check.innerHTML=v,sv=check.innerHTML.replace(RE.amp,"&").replace(RE.lt,"<").replace(RE.gt,">"),check.innerHTML="",each(t.childNodes,function(el){"#text"===el.nodeName&&(tv=el.nodeValue,-1!==tv.indexOf(s)&&(el.nodeValue=tv.replace(r,sv)))}))},fn.replace=function(t,v,c){var s,r;"string"!=typeof c||isEmpty(v)||(s="#"+c+"#",r=rx[V.rep+c],r||(rxl++,r=new RegExp(s,"g"),rx[V.rep+c]=r),t.innerHTML=t.innerHTML.replace(r,v))},fn.text=isTC?function(t,v){isEmpty(v)||(t.textContent=v)}:function(t,v){isEmpty(v)||(t.innerText=v)},fn.html=function(t,v){isEmpty(v)||(t.innerHTML=v)},fn.val=function(t,v){isEmpty(v)||(t.value=v)},fn.data=function(t,v,c){"string"!=typeof c||isEmpty(v)||t.setAttribute("data-"+c,v)},fn.dt=function(t,v,c){"string"!=typeof c||isEmpty(v)||(t.attrData||(t.attrData={}),t.attrData[c]=v)},fn.show=function(t,v){t.style.display=getBln(v)?"":"none"},fn.hide=function(t,v){fn.show(t,!getBln(v))},fn.keep=function(t,v){getBln(v)||(t.parentNode?t.parentNode.removeChild(t):(t.innerHTML="",t._remove=!0))},fn.remove=function(t,v){fn.keep(t,!getBln(v))},fn.setClass=function(t,v,c){setClass(t,c,getBln(v))},fn._setClass=function(t,v,c){setClass(t,c,!getBln(v))},fn.addClass=function(t,v){"string"==typeof v&&setClass(t,v,!0)},fn.removeClass=function(t,v){"string"==typeof v&&setClass(t,v,!1)},fn.restore=function(t,v){var scr=t.previousSibling;scr&&scr.type===V.scc&&getBln(v)&&t.parentNode.replaceChild(cloneNode(scr._tw_template),t)},fn._restore=function(t,v){fn.restore(t,!getBln(v))},fn.restoreAttr=function(t,v){var tag,scr=t.previousSibling;scr&&scr.type===V.scc&&getBln(v)&&(tag=scr._tw_template,each(attrList(tag),function(p){p=p.name,t.setAttribute(p,tag.getAttribute(p))}))},fn._restoreAttr=function(t,v){fn.restoreAttr(t,!getBln(v))},fn.restoreText=function(t,v){var arr,id,scr=t.previousSibling;scr&&scr.type===V.scc&&getBln(v)&&(arr=[],id=0,each(t.childNodes,function(el){"#text"===el.nodeName&&arr.push(el)}),each(scr._tw_template.childNodes,function(el){"#text"===el.nodeName&&(arr[id++].nodeValue=el.nodeValue)}))},fn._restoreText=function(t,v){fn.restoreText(t,!getBln(v))},fn.restoreHtml=function(t,v){var scr=t.previousSibling;scr&&scr.type===V.scc&&getBln(v)&&(t.innerHTML=scr._tw_template.innerHTML)},fn._restoreHtml=function(t,v){fn.restoreHtml(t,!getBln(v))},fn.restoreChild=function(t,v){var tag,chk,bln=getBln(v);each(childEl(t,V.scc),function(sc){tag=sc.nextSibling,chk=!tag||!hasCls(tag,A.cln),chk&&bln&&sc.parentNode.insertBefore(cloneNode(sc._tw_template),sc.nextSibling)})},fn._restoreChild=function(t,v){fn.restoreChild(t,!getBln(v))},fn.render=function(t,v){return _this.render(t,v),!1},fn.log=function(t,v,c){clog("[TagWire:"+H+c+T+"log]","\n - target :",t,"\n - value :",v)}}cox.TagWire=cox.TagWire||new CoxTagWire,void 0===window.TagWire&&(window.TagWire=cox.TagWire)}),function($,TagWire){"use strict";function plugin(name,fnc){var jfn=$.fn;void 0===jfn[name]&&(jfn[name]=fnc)}$&&TagWire&&(TagWire.setTail("data",function(t,v,c){$(t).data(c,v)}),$.fn.tagwire=function(v,o){return TagWire.render(this,v,o),this},plugin("render",$.fn.tagwire),plugin("callTail",function(fn,v,c){return TagWire.callTail(this,fn,v,c),this}),plugin("initTemplate",function(){return TagWire.initTemplate(this),this}),plugin("copyNode",function(){return $(TagWire.cloneNode(this))}),plugin("loadAndRender",function(u,o){var ax,fn,efn,$this=this;return ax={dataType:"json",success:function(v){"function"==typeof fn&&fn(v),TagWire.render($this,v,o)},error:function(e){"function"==typeof efn&&efn(e),TagWire.error('[TagWire:loadAndRender]  JSON Parse Error : "'+ax.url+'"\n\n',e.responseText)}},"string"==typeof u?ax.url=u:(fn=u.success,efn=u.error,ax=$.extend({},u,ax)),$.ajax(ax),this}))}(window.jQuery,window.TagWire);